<!DOCTYPE html>
<html>
<head>

  <meta charset="UTF-8">
  <title>Link Manager</title>

  <style>
    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
    th, td {
      padding: 5px;
    }
  </style>

</head>

<body>

  <h1>Link Manager</h1>

  <table id="link-table">
    <tr>
      <th>Title</th>
      <th>URL</th>
      <th>Actions</th>
    </tr>

  </table>
  <br>

  <h3>Add Link</h3>

  <form>
    <label for="title">Title:</label>
    <input type="text" id="title" name="title">
    <br><br>
    <label for="url">URL:</label>
    <input type="text" id="url" name="url">
    <br><br>
    <button type="button" onclick="addLink()">Add</button>
    <button type="button" onclick="addLinkFromBlog()">Add link from blog</button>
  </form>
  <br>

  <script>

    var links = [];

    function addLink() {
      var title = document.getElementById("title").value;
      var url = document.getElementById("url").value;
      links.push({ title: title, url: url });
      updateTable();
    }

    function editLink(index) {
      var title = prompt("Enter new title:", links[index].title);
      var url = prompt("Enter new URL:", links[index].url);
      links[index] = { title: title, url: url };
      updateTable();
    }

    function deleteLink(index) {
      links.splice(index, 1);
      updateTable();
    }

    function updateTable() {
      var table = document.getElementById("link-table");
      table.innerHTML = "";
      table.innerHTML =
        "<tr><th>Title</th><th>URL</th><th>Actions</th></tr>";
      for (var i = 0; i < links.length; i++) {
        var row = table.insertRow();
        var titleCell = row.insertCell(0);
        var urlCell = row.insertCell(1);
        var actionsCell = row.insertCell(2);
        titleCell.innerHTML = links[i].title;
        urlCell.innerHTML = links[i].url;
        actionsCell.innerHTML =
          "<button onclick='editLink(" +
          i +
          ")'>Edit</button>" +
          "<button onclick='deleteLink(" +
          i +
          ")'>Delete</button>";
      }
    }

    const request = require("request");
    const cheerio = require("cheerio");

    function crawlLink(url) {
    request(url, (error, response, html) => {
        if (!error && response.statusCode == 200) {
        const $ = cheerio.load(html);
        let title = $("title").text();
        links.push({ title: title, url: url });
        updateTable();
        }
    });
    }

    function addLinkFromBlog() {
    var url = "https://devgo.com.br/";
    crawlLink(url);
    }

  </script>

</body>
</html>
